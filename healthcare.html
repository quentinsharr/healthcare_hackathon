<!doctype html>
<html lang="en">

<head>
  <script type="module">

    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    // Replace 'YOUR_API_KEY' with your actual Gemini API key
    const API_KEY = "AIzaSyBqZ4uSsnutN0-3Vt75QgRy4cfJCVrxKGY";
    const genAI = new GoogleGenerativeAI(API_KEY);

    async function get_ai_response(promptText)
    {

      try
      {
        const model = genAI.getGenerativeModel({ model: "gemini-1.5-pro-002" });
        const result = await model.generateContent(promptText);
        const response = result.response;
        return response.text();
      } catch (error)
      {
        console.error("Error calling Gemini API:", error);
        return "Error: Could not generate content.";
      }
    }

    document.getElementById("analyzeBtn").onclick = async function ()
    {

      const symptomInput = document.getElementById("symptomSearch").value;
      const outputDiv = document.getElementById("diagnosis");

      if (!symptomInput.trim())
      {
        outputDiv.innerHTML = "Please enter symptoms first ü©∫";
        return;
      }

      outputDiv.innerHTML = "‚è≥ Analyzing symptoms with Gemini AI...";

      var ai_input = symptomInput + "what medicine should I take?";

      const reply = await get_ai_response(ai_input);
      outputDiv.innerHTML = `<strong>Results:</strong><br/>${reply}`;
    };

  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QuackHub Healthcare ‚Äî Hackathon Mockup</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="healthstyles.css">
</head>

<body>
  <div class="float-bg" aria-hidden="true">
    <div class="particle p1 tiny"></div>
    <div class="particle p2 sml"></div>
    <div class="particle p3 med"></div>
    <div class="particle p4 big"></div>
    <div class="particle p5 duck"></div>
  </div>


  <div class="container">
    <header class="top-header">
      <div class="logo" role="banner" aria-label="QuackHub Healthcare logo">
        <div class="mark">QH</div>
        <div class="logo-text">
          <div class="title">QuackHub Healthcare</div>
          <div class="sub">Quick symptom triage ‚Äî hackathon mock</div>
        </div>
      </div>
      <div class="team-tag">Team Quack ‚Äî Quentin ¬∑ Alan ¬∑ Amartya</div>
    </header>

    <main class="grid" role="main">
      <section class="card left-card">
        <h3>Symptoms &amp; details</h3>

        <div class="symptom-block">
          <label for="symptomSearch">Symptoms (choose multiple)</label>
          <div id="symptomInput" class="multi-select" tabindex="0" aria-haspopup="listbox" aria-expanded="false"
            role="combobox" aria-controls="symptomList">
            <span id="chipArea" class="chip-area" aria-live="polite"></span>
            <input id="symptomSearch" class="symptom-search" type="text"
              placeholder="Type to filter / press enter to add..." />
          </div>

          <div class="dropdown">
            <div id="symptomList" class="list" role="listbox" aria-label="Symptoms list" hidden></div>
          </div>
          <div class="help">Tip: click or keyboard-select to add symptoms. Common examples included.</div>
        </div>

        <div class="form-row">
          <div class="small">
            <label for="age">Age</label>
            <input id="age" type="number" min="0" placeholder="e.g., 24" />
          </div>
          <div class="small">
            <label for="sex">Sex</label>
            <select id="sex">
              <option value="">Prefer not to say</option>
              <option>Male</option>
              <option>Female</option>
              <option>Other</option>
            </select>
          </div>
          <div class="small">
            <label for="weight">Weight (lb)</label>
            <input id="weight" type="number" min="0" placeholder="optional" />
          </div>
          <div class="small">
            <label for="height">Height (in)</label>
            <input id="height" type="number" min="0" placeholder="optional" />
          </div>
        </div>

        <div class="actions">
          <button id="analyzeBtn" class="btn">Enter ‚Äî Analyze</button>
          <button id="resetBtn" class="btn secondary">Reset</button>
        </div>

        <div class="help small-help">This UI is a mock triage tool for the hackathon ‚Äî it does not replace medical
          advice.</div>
      </section>

      <aside class="card right-col" aria-label="Results">
        <div class="result-title">
          <div>
            <div class="muted-small">Results</div>
            <div class="result-main">Potential Diagnosis &amp; Triage</div>
          </div>
          <div class="muted-small" id="lastUpdated">‚Äî</div>
        </div>

        <div id="emergencyBanner" class="danger" role="alert" hidden>
          <div class="danger-title">EMERGENCY CARE RECOMMENDED</div>
          <div class="danger-sub">Get to an emergency department now. Don't be a hero.</div>
        </div>

        <div id="resultBox" class="result-box" aria-live="polite">
          <div class="result-row">
            <div class="muted-small">Potential diagnosis</div>
            <div id="diagnosis" class="result-text">No analysis yet ‚Äî press Enter.</div>
          </div>

          <div class="result-row">
            <div class="muted-small">Suggested medications (if any)</div>
            <div id="meds" class="result-text">‚Äî</div>
          </div>

          <div class="result-row">
            <div class="muted-small">Confidence</div>
            <div id="confidence" class="result-stat">‚Äî</div>
          </div>

          <div class="result-row">
            <div class="muted-small">Emergency recommended?</div>
            <div id="emergencyYesNo" class="result-stat">‚Äî</div>
          </div>
        </div>

        <footer class="note">Prototype for demo. Data is stored client-side only.</footer>
      </aside>
    </main>
  </div>
</body>

</html>